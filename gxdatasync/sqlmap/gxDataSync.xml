<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "http://www.ibatis.com/dtd/sql-map-2.dtd">

<!-- 高新数据接口 -->
<sqlMap namespace="gxDataSync">


    <!-- 查询业务报文流水号 -->
    <select id="queryAAE790" parameterClass="map"  resultClass="java.util.HashMap">
        SELECT 'GXWSJB'||TO_CHAR(SYSDATE,'yyyymmdd')||SUBSTR(to_Char(WSJB.SEQ_AAE790.Nextval),-10) AS aae790  FROM dual
    </select>

    <!-- 调用高新网厅接口写日志 -->
    <insert id="insertYHJKlog" parameterClass="map">
        insert into wsjb.yhJKlog(
        jylsh,
        jybh,
        qqbw,
        fhbw,
        aae036
        )values(
        #jylsh#,
        #jybh#,
        #qqbw#,
        #fhbw#,
        sysdate
        )
    </insert>

    <!-- 修改高新网厅密码 -->
    <update id="updateXagxwtUserPwd" parameterClass="map">
        update xagxwt.tauser
        set password = #pwdjm#,
        pwdlastmodifydate = sysdate
        where loginid = #loginid#
    </update>

    <!-- 修改高新网厅密码写日志 -->
    <insert id="insertPwdModifyLog" parameterClass="map">
        insert into wsjb.pwdmodifylog(
        loginid,
        pwdbefore,
        pwdafter,
        pwdinput,
        aae036
        )values(
        #jylsh#,
        (select password from xagxwt.tauser where loginid = #loginid# ),
        #pwdjm#,
        #password#,
        sysdate
        )
    </insert>

</sqlMap>